{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"$id": "items-shared.json",

	"title": "Shared Item Schema",
	"description": "Shared item definitions to be used in item schemas.",
	"version": "1.1.1",

	"$defs" : {
		"_itemModifySpeedEqual": {
			"type": "string",
			"enum": ["walk", "burrow", "climb", "fly", "swim"]
		},

		"itemModifySpeed": {
			"type": "object",
			"properties": {
				"multiply": {
					"type": "object",
					"properties": {
						"walk": {"type": "number"},
						"burrow": {"type": "number"},
						"climb":  {"type": "number"},
						"fly": {"type": "number"},
						"swim":  {"type": "number"},
						"*":  {"type": "number"}
					},
					"additionalProperties": false
				},
				"static": {
					"type": "object",
					"properties": {
						"walk": {"type": "number"},
						"burrow": {"type": "number"},
						"climb":  {"type": "number"},
						"fly": {"type": "number"},
						"swim":  {"type": "number"},
						"*":  {"type": "number"}
					},
					"additionalProperties": false
				},
				"equal": {
					"type": "object",
					"properties": {
						"walk": {"$ref": "#/$defs/_itemModifySpeedEqual"},
						"burrow": {"$ref": "#/$defs/_itemModifySpeedEqual"},
						"climb":  {"$ref": "#/$defs/_itemModifySpeedEqual"},
						"fly": {"$ref": "#/$defs/_itemModifySpeedEqual"},
						"swim":  {"$ref": "#/$defs/_itemModifySpeedEqual"}
					},
					"additionalProperties": false
				},
				"bonus": {
					"type": "object",
					"properties": {
						"walk": {"type": "number"},
						"burrow": {"type": "number"},
						"climb":  {"type": "number"},
						"fly": {"type": "number"},
						"swim":  {"type": "number"},
						"*":  {"type": "number"}
					},
					"additionalProperties": false
				}
			},
			"additionalProperties": false
		},

		"itemRarity": {
			"anyOf": [
				{"$ref": "util.json#/$defs/rarity"},
				{
					"type": "string",
					"description": "\"none\" is for mundane items. \"unknown (magic)\" is for miscellaneous magical items. \"unknown\" is for miscellaneous mundane items. \"varies\" is for item groups, or for magic variants, where it has the special functionality of maintaining a base item's rarity when creating specific variants.",
					"enum": [
						"none",
						"unknown",
						"unknown (magic)",
						"varies"
					]
				}
			]
		},

		"itemRecharge": {
			"enum": ["round", "restShort", "restLong", "dawn", "dusk", "midnight", "week", "month", "year", "decade", "century", "special"]
		},

		"itemRechargeAmount": {
			"type": ["integer", "string"]
		},

		"itemType": {
			"type": "string",
			"description": "$|DMG: Treasure\n$A|DMG: Treasure (Art Object)\n$A|XDMG: Treasure (Art Object)\n$C: Treasure (Coinage)\n$C|XPHB: Treasure (Coinage)\n$G|DMG: Treasure (Gemstone)\n$G|XDMG: Treasure (Gemstone)\nA: Ammunition\nA|XPHB: Ammunition\nAF|DMG: Ammunition (futuristic)\nAF|XDMG: Ammunition (futuristic)\nAIR|DMG: Vehicle (air)\nAIR|XPHB: Vehicle (air)\nAT: Artisan Tool\nAT|XPHB: Artisan Tool\nEXP|DMG: Explosive\nEXP|XDMG: Explosive\nFD: Food and Drink\nFD|XPHB: Food and Drink\nG: Adventuring Gear\nG|XPHB: Adventuring Gear\nGS: Gaming Set\nGS|XPHB: Gaming Set\nGV|DMG: Generic Variant\nGV|XDMG: Generic Variant\nHA: Heavy Armor\nHA|XPHB: Heavy Armor\nIDG|TDCSR: Illegal Drug\nINS: Instrument\nINS|XPHB: Instrument\nLA: Light Armor\nLA|XPHB: Light Armor\nM: Melee Weapon\nM|XPHB: Melee Weapon\nMA: Medium Armor\nMA|XPHB: Medium Armor\nMNT: Mount\nMNT|XPHB: Mount\nOTH: Other\nP: Potion\nP|XPHB: Potion\nR: Ranged Weapon\nR|XPHB: Ranged Weapon\nRD|DMG: Rod\nRD|XDMG: Rod\nRG|DMG: Ring\nRG|XDMG: Ring\nS: Shield\nS|XPHB: Shield\nSC|DMG: Scroll\nSC|XPHB: Scroll\nSCF: Spellcasting Focus\nSCF|XPHB: Spellcasting Focus\nSHP: Vehicle (water)\nSHP|XPHB: Vehicle (water)\nSPC|AAG: Vehicle (space)\nT: Tool\nT|XPHB: Tool\nTAH: Tack and Harness\nTAH|XPHB: Tack and Harness\nTG: Trade Good\nTG|XPHB: Trade Good\nVEH: Vehicle (land)\nVEH|XPHB: Vehicle (land)\nWD|DMG: Wand\nWD|XDMG: Wand",
			"$$switch_key": {
				"key_site": "enum",
				"key_ua": "enum",
				"key_brew": "examples",
				"value": [
					"$|DMG",
					"$A|DMG",
					"$A|XDMG",
					"$C",
					"$C|XPHB",
					"$G|DMG",
					"$G|XDMG",
					"A",
					"A|XPHB",
					"AF|DMG",
					"AF|XDMG",
					"AIR|DMG",
					"AIR|XPHB",
					"AT",
					"AT|XPHB",
					"EXP|DMG",
					"EXP|XDMG",
					"FD",
					"FD|XPHB",
					"G",
					"G|XPHB",
					"GS",
					"GS|XPHB",
					"GV|DMG",
					"GV|XDMG",
					"HA",
					"HA|XPHB",
					"IDG|TDCSR",
					"INS",
					"INS|XPHB",
					"LA",
					"LA|XPHB",
					"M",
					"M|XPHB",
					"MA",
					"MA|XPHB",
					"MNT",
					"MNT|XPHB",
					"OTH",
					"P",
					"P|XPHB",
					"R",
					"R|XPHB",
					"RD|DMG",
					"RD|XDMG",
					"RG|DMG",
					"RG|XDMG",
					"S",
					"S|XPHB",
					"SC|DMG",
					"SC|XPHB",
					"SCF",
					"SCF|XPHB",
					"SHP",
					"SHP|XPHB",
					"SPC|AAG",
					"T",
					"T|XPHB",
					"TAH",
					"TAH|XPHB",
					"TG",
					"TG|XDMG",
					"VEH",
					"VEH|XPHB",
					"WD|DMG",
					"WD|DMG"
				]
			}
		},

		"itemAge": {
			"type": "string",
			"$$switch_key": {
				"key_site": "enum",
				"key_ua": "enum",
				"key_brew": "examples",
				"value": ["futuristic", "modern", "renaissance"]
			}
		},

		"itemProperty": {
			"type": "array",
			"description": "2H: Two-Handed\n2H|XPHB: Two-Handed\nA: Ammunition\nA|XPHB: Ammunition\nAF|DMG: Ammunition (futuristic)\nBF|DMG: Burst Fire\nER|TDCSR: Extended Reach\nF: Finesse\nF|XPHB: Finesse\nH: Heavy\nH|XPHB: Heavy\nL: Light\nL|XPHB: Light\nLD: Loading\nLD|XPHB: Loading\nOTH: Other\nR: Reach\nR|XPHB: Reach\nRLD: Reload\nRLD|XPHB: Reload\nS: Special\nT: Thrown\nT|XPHB: Thrown\nV: Versatile\nV|XPHB: Versatile\nVst|TDCSR: Vestige of Divergence",
			"items": {
				"type": "string",
				"$$switch_key": {
					"key_site": "enum",
					"key_ua": "examples",
					"key_brew": "examples",
					"value": [
						"2H",
						"2H|XPHB",
						"A",
						"A|XPHB",
						"AF|DMG",
						"BF|DMG",
						"ER|TDCSR",
						"F",
						"F|XPHB",
						"H",
						"H|XPHB",
						"L",
						"L|XPHB",
						"LD",
						"LD|XPHB",
						"OTH",
						"R",
						"R|XPHB",
						"RLD",
						"RLD|XPHB",
						"S",
						"T",
						"T|XPHB",
						"V",
						"V|XPHB",
						"Vst|TDCSR"
					]
				}
			}
		},

		"itemScfType": {
			"type": "string",
			"$$switch_key": {
				"key_site": "enum",
				"key_ua": "enum",
				"key_brew": "examples",
				"value": ["arcane", "druid", "holy"]
			}
		},

		"itemTier": {
			"type": "string",
			"description": "Item Tier as per XGE p135",
			"$$switch_key": {
				"key_site": "enum",
				"key_ua": "enum",
				"key_brew": "examples",
				"value": ["minor", "major"]
			}
		},

		"itemWeaponCategory": {
			"type": "string",
			"$$switch_key": {
				"key_site": "enum",
				"key_ua": "enum",
				"key_brew": "examples",
				"value": ["simple", "martial"]
			}
		},

		"itemAmmoType": {
			"type": "string",
			"$$switch_key": {
				"key_site": "enum",
				"key_ua": "enum",
				"key_brew": "examples",
				"value": [
					"energy cell",
					"modern bullet",
					"blowgun needle|phb",
					"crossbow bolt|phb",
					"arrow|phb",
					"renaissance bullet",
					"sling bullet|phb",
					"needle|xphb",
					"bolt|xphb",
					"arrow|xphb",
					"firearm bullet|xphb",
					"sling bullet|xphb"
				]
			}
		},

		"itemMastery": {
			"type": "array",
			"items": {"type": "string"},
			"minItems": 1,
			"uniqueItems": true
		},

		"itemCarryingCapacity": {
			"type": "integer",
			"description": "Of a mount/beast, not a container."
		},

		"itemSpeed": {
			"type": "integer"
		},

		"itemReach": {
			"type": "integer"
		},

		"itemDexterityMax": {
			"description": "Maximum dexterity modifier for medium armor.",
			"type": ["integer", "null"]
		},

		"packContents": {
			"type": "array",
			"items": {
				"oneOf": [
					{
						"type": "string"
					},
					{
						"type": "object",
						"properties": {
							"special": {"type": "string"},
							"quantity": {"type": "integer"}
						},
						"additionalProperties": false,
						"required": ["special"]
					},
					{
						"type": "object",
						"properties": {
							"item": {"type": "string"},
							"quantity": {"type": "integer"},
							"displayName": {"type": "string"}
						},
						"additionalProperties": false,
						"required": ["item"],
						"minProperties": 2
					}
				]
			}
		},

		"itemMiscTags": {
			"type": "array",
			"items": {
				"description": "CF/W: Creates Food/Water\nCNS: Consumable\nTT: Trinket Table",
				"enum": ["CF/W", "CNS", "TT"]
			}
		},

		"$$if": {
			"modes": ["brew", "ua"],
			"value": {
				"customProperties": {
					"description": "An unrestricted area for custom properties to be stored.",
					"type": "object",
					"additionalProperties": {
						"type": [
							"boolean",
							"string",
							"number",
							"integer"
						]
					}
				}
			}
		},

		"$$ifBrew": {
			"itemAcSpecial": {
				"description": "Free text field for homebrew use.",
				"type": "string"
			},

			"fluff": {
				"description": "This is intended to be used for Homebrew only - site data should include a fluff file per source.",
				"anyOf": [
					{
						"description": "References \"itemFluff\" array items",
						"type": "object",
						"properties": {
							"_itemFluff": {
								"type": "object",
								"properties": {
									"name": {
										"type": "string"
									},
									"source": {"$ref": "util.json#/$defs/source"}
								}
							},
							"_appendItemFluff": {
								"type": "object",
								"properties": {
									"name": {
										"type": "string"
									},
									"source": {"$ref": "util.json#/$defs/source"}
								}
							}
						},
						"additionalProperties": false
					},
					{
						"$ref": "util.json#/$defs/fluffObject"
					}
				]
			}
		}
	}
}
